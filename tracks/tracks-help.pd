#N canvas 525 50 550 497 12;
#X text 30 61 The [tracks] object is designed to find the best continuity
between indexed information. Usually tracking objects output data in
order of appearance and need further logic to achieve continuity. Best
continuity is defined as the smallest euclidean distance between two
points in contiguous frames of time.;
#X obj 128 288 tracks;
#X obj 128 194 r tracks;
#N canvas 0 22 572 489 output 0;
#X text 32 100 outlet 1: outputs incoming list with new indexes;
#X text 32 120 outlet 2: outputs the indexes with best continuity \,
for example:;
#X text 66 152 if index 1 in frame 1 is closest to index 3 in frame
2:;
#X text 101 168 1 3;
#X text 95 209 -1 2;
#X text 67 182 if index 2 has no precedent ideal continuity a new track
is started and noted with -1:;
#X text 67 223 if index 4 has no subsequent ideal continuity a current
track is ended and noted with -2:;
#X text 95 250 -2 4;
#X text 31 283 order of outlets: 1 \, 2 \, 3;
#X text 31 263 outlet 3: outputs a 1 after spitting;
#X text 202 65 Outlets:;
#X restore 386 270 pd output;
#X text 222 25 "Tracks";
#X text 375 194 See here:;
#X text 32 427 This object is used in the MANO and Silent Drum Instruments
Jaime Oliver \, joliverl \, 2010;
#X text 32 459 jaime.oliver2@gmail.com - www.jaimeoliver.pe;
#N canvas 0 22 450 300 init 0;
#X obj 39 58 loadbang;
#X msg 40 87 \; tracks max_distance 40 \, weights 1 1 1 \, dimen 2
;
#X connect 0 0 1 0;
#X restore 386 292 pd init;
#N canvas 0 22 958 690 messages 0;
#X text 275 198 The "weights" message allows you to create weighted
distances between variables. for example weight 1 1 1 gives equal weight
to all dimensions;
#X text 326 281 The "max_distance" message tells the [tracks] object
what is the limit for a good continuity. If [tracks] finds that the
closest distance between to points is bigger than "max_distance" it
will start a new track.;
#X text 327 402 The "clear" message \, clears all previous information
from memory and terminates all current tracks (with a -2);
#X text 200 114 The "dimen" message tells the [tracks] object how many
dimensions will be used to calculate the distance. Only 1 \, 2 and
3 are currently implemented.;
#X text 350 466 Prints information to console;
#X text 390 558 The spit (alias:bang) message is sent after all information
has been inputted. It asks the track object to output the corresponding
;
#X msg 252 415 clear;
#X msg 322 566 spit;
#X msg 284 463 print;
#X obj 95 639 s tracks;
#X msg 332 591 bang;
#X msg 171 300 max_distance 1.3;
#X msg 139 217 weights 1 1 2;
#X msg 95 125 dimen 3;
#X text 261 374 Debugging:;
#X text 135 74 Parameters:;
#X text 309 523 Output indexed data:;
#X connect 6 0 9 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 10 0 9 0;
#X connect 11 0 9 0;
#X connect 12 0 9 0;
#X connect 13 0 9 0;
#X restore 386 247 pd messages;
#X obj 142 222 print IN;
#X obj 128 372 print OUT-1;
#X obj 150 345 print OUT-2;
#X obj 173 318 print OUT-3;
#N canvas 497 22 657 721 example 0;
#X msg 62 389 \; tracks 0 94 100 \, 1 194 28 \, bang;
#X msg 67 432 \; tracks 0 25 75 \, 1 86 101 \, 2 190 23 \, bang;
#X msg 72 475 \; tracks 0 24 76 \, 1 84 100 \, 2 190 23 \, bang;
#X msg 79 518 \; tracks 0 84 100 \, 1 24 76 \, 2 190 23 \, bang;
#X msg 85 561 \; tracks 0 25 75 \, bang;
#X msg 90 604 \; tracks 0 76 109 \, 1 14 74 \, 2 182 34 \, 3 210 198
\, bang;
#X msg 96 647 \; tracks 0 212 192 \, bang;
#N canvas 0 22 333 527 random 0;
#X obj 81 342 list;
#X obj 98 296 list append;
#X obj 98 318 t a a;
#X obj 80 364 list prepend;
#X obj 99 228 until;
#X obj 81 183 t b b b f;
#X obj 98 250 random 4000;
#X obj 98 272 / 1000;
#X obj 82 136 until;
#X obj 82 159 f;
#X obj 117 159 + 1;
#X msg 129 135 0;
#X obj 82 116 t f b;
#X obj 99 208 f;
#X obj 51 60 unpack;
#X obj 51 83 t b f;
#X obj 54 407 outlet;
#X obj 51 33 inlet;
#X text 54 439 a list of random floats;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 0 1;
#X connect 2 1 1 1;
#X connect 3 0 16 0;
#X connect 4 0 6 0;
#X connect 5 0 0 0;
#X connect 5 1 13 0;
#X connect 5 2 1 1;
#X connect 5 3 3 1;
#X connect 6 0 7 0;
#X connect 7 0 1 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 0 5 0;
#X connect 10 0 9 1;
#X connect 11 0 9 1;
#X connect 12 0 8 0;
#X connect 12 1 11 0;
#X connect 13 0 4 0;
#X connect 14 0 15 0;
#X connect 14 1 13 1;
#X connect 15 0 16 0;
#X connect 15 1 12 0;
#X connect 17 0 14 0;
#X restore 512 404 pd random;
#X msg 532 369 10 3;
#X msg 498 362 5 9;
#X obj 520 436 s tracks;
#X text 99 115 For example: in two consecutive frames of video an analysis
object outputs:;
#X text 119 149 frame 1: 0 1 1 and 1 5 5;
#X text 119 169 frame 2: 0 5 4 and 1 6 8 and 2 1 2;
#X text 99 184 Tracks will find the closest distance between both frames:
;
#X text 120 202 0->2;
#X text 120 222 1->0;
#X text 120 242 and a new track for index 1: -1 1;
#X text 490 318 Or this:;
#X text 40 309 Bang these to test \, see console for prints:;
#X text 62 58 Lists (or messages prepended with "input") have the form
(index \, d1 \, d2 \, d3) where 'd' are dimensions.;
#X text 234 27 Input list:;
#X msg 56 346 \; tracks 0 23 78 \, 1 89 104 \, 2 190 23 \, bang;
#X msg 509 512 \; tracks clear;
#X text 490 480 Or start over:;
#X connect 7 0 10 0;
#X connect 8 0 7 0;
#X connect 9 0 7 0;
#X restore 386 223 pd example;
#X connect 1 0 11 0;
#X connect 1 1 12 0;
#X connect 1 2 13 0;
#X connect 2 0 1 0;
#X connect 2 0 10 0;
