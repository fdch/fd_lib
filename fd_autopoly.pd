#N canvas 527 47 665 408 10;
#X obj 109 137 s \$0-gemlist;
#N canvas 91 47 450 300 \$0-sub 0;
#X obj 10 10 r 1807-gemlist;
#X obj 20 40 r 1807-siglist;
#X obj 20 60 0 0 0 0;
#X obj 20 80 route 0;
#X obj 10 150 0 0;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X restore 53 342 pd \$0-sub;
#X obj 524 111 s \$0-siglist;
#X obj 53 137 loadbang;
#X text 98 190 <-- number of points;
#X text 315 276 NOTE: your_abs_name needs to output X Y Z coordinates
to be routed just like [sigmund~] \, and it takes a sigmund-dependant
input, f 46;
#X text 44 51 **********************************************************************************************
, f 94;
#X text 41 17 **********************************************************************************************
, f 94;
#X text 45 33 [autopoly];
#X text 114 33 A VARIABLE POINT POLYGON CREATOR [Gem] THAT TALKS TO
[sigmund~] VIA your_abs_name, f 82;
#X text 178 72 CREATION ARGUMENTS:;
#X text 117 344 <-- build happens here;
#X obj 46 71 inlet gemlist;
#X obj 524 71 inlet sigmund;
#X obj 46 93 route float;
#N canvas 148 119 833 580 init 0;
#X obj 274 361 list prepend \$0;
#X obj 261 89 >= 2;
#X obj 274 227 spigot;
#X obj 57 234 spigot;
#X obj 90 212 == 0;
#X obj 176 13 inlet;
#X text 348 221 if points greater than 2 \, then clone your abstaction
, f 21;
#X text 69 284 otherwise \, just create it, f 17;
#X msg 422 121 \; pd-\$1-sub clear \; pd-\$1-sub obj 10 10 r \$1-gemlist
\; pd-\$1-sub obj 20 40 r \$1-siglist \;;
#X obj 422 88 pack \$0;
#X obj 178 35 t b f f b, f 16;
#X obj 57 358 list prepend \$0;
#X obj 274 293 list prepend clone \$3;
#X obj 261 139 t f f f;
#X obj 650 403 pack \$4;
#X obj 643 277 sel 0 1;
#X obj 709 403 pack \$2;
#X obj 656 477 outlet;
#X text 657 504 number of voices;
#X text 73 505 arg \$4 is number of voices;
#X text 317 506 arg \$2 is number of voices;
#X obj 57 337 list append \$3 \$4 \$5 \$6;
#X obj 274 341 list append \$4 \$5 \$6;
#X msg 57 399 \; pd-\$1-sub obj 20 60 \$2 \$3 \$4 \$5 \; pd-\$1-sub
connect 1 0 2 0 \;;
#X msg 274 396 \; pd-\$1-sub obj 20 60 \$2 \$3 \$4 \$5 \$6 \$7 \; pd-\$1-sub
connect 1 0 2 0 \;;
#X connect 0 0 24 0;
#X connect 1 0 13 0;
#X connect 2 0 12 0;
#X connect 3 0 21 0;
#X connect 4 0 3 1;
#X connect 5 0 10 0;
#X connect 9 0 8 0;
#X connect 10 0 3 0;
#X connect 10 1 2 0;
#X connect 10 2 1 0;
#X connect 10 3 9 0;
#X connect 11 0 23 0;
#X connect 12 0 22 0;
#X connect 13 0 4 0;
#X connect 13 1 2 1;
#X connect 13 2 15 0;
#X connect 14 0 17 0;
#X connect 15 0 14 0;
#X connect 15 1 16 0;
#X connect 16 0 17 0;
#X connect 21 0 11 0;
#X connect 22 0 0 0;
#X restore 135 247 pd init;
#X obj 46 190 pack \$2;
#X obj 46 212 t b f;
#N canvas 86 22 1106 614 patching 0;
#X msg 712 368 add2 \$1;
#X obj 712 339 f;
#X obj 739 339 + 1;
#X msg 712 429 \; pd-1807-sub obj 20 80 route 0;
#X obj 712 313 until;
#X obj 749 286 del 1;
#X msg 786 286 0;
#X obj 712 262 t f b b b, f 19;
#X obj 712 286 max 1;
#X obj 437 311 t f b;
#X obj 778 339 pack \$0;
#X msg 778 402 set \, addsemi \, add2 pd-\$1-sub obj 20 80 route;
#X obj 432 405 pack f \$0;
#X text 754 240 Routing;
#X text 529 433 <-- define geo: e.g. "polygon" \, "curve", f 19;
#X obj 432 436 list prepend \$1;
#X msg 432 490 \; pd-\$3-sub connect 2 0 3 0 \; pd-\$3-sub obj 10 150
\$1 \$2 \; pd-\$3-sub connect 0 0 4 0 \;;
#X obj 161 55 inlet;
#X obj 704 225 f \$2;
#X obj 437 236 f \$2;
#X obj 667 64 inlet;
#X text 720 66 number of voices;
#X obj 41 416 fd_autopatch;
#X obj 41 362 pack f \$0;
#X msg 41 387 name \$2-sub \, target 4 \, source 3 \, offset 0 1 \,
number \$1;
#X obj 166 251 f \$2;
#X obj 161 77 t b b b;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 1 1;
#X connect 4 0 1 0;
#X connect 5 0 4 1;
#X connect 6 0 1 1;
#X connect 7 0 8 0;
#X connect 7 1 5 0;
#X connect 7 2 6 0;
#X connect 7 3 10 0;
#X connect 8 0 4 0;
#X connect 9 0 12 0;
#X connect 9 1 3 0;
#X connect 10 0 11 0;
#X connect 11 0 3 0;
#X connect 12 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 26 0;
#X connect 18 0 7 0;
#X connect 19 0 9 0;
#X connect 20 0 19 1;
#X connect 20 0 18 1;
#X connect 20 0 25 1;
#X connect 23 0 24 0;
#X connect 24 0 22 0;
#X connect 25 0 23 0;
#X connect 26 0 25 0;
#X connect 26 1 19 0;
#X connect 26 2 18 0;
#X restore 46 278 pd patching;
#X text 315 326 The called abstraction can take up to 2 args;
#X text 270 202 autopoly polygon||curve N your_abs_name (alternate
N or first argument) (arg2 \, arg3);
#X connect 3 0 16 0;
#X connect 12 0 14 0;
#X connect 13 0 2 0;
#X connect 14 0 16 0;
#X connect 14 1 0 0;
#X connect 15 0 18 1;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 17 1 15 0;
